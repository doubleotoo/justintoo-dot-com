!!!
%html

  %head
    %title= @title || "justintoo"
    %meta(charset='UTF-8')
    %meta(name='description' content=@description)
    %link(href='/stylesheet.css' rel='stylesheet')
    %link(rel='shortcut icon' href='/favicon.png')
    %link(href='/feed' type='application/rss+xml' rel='alternate' title='RSS Feed')
    %script(type="text/javascript" src="/javascript/jquery.min.js")
    /[if lt IE 9]
      %script(src='http://html5shiv.googlecode.com/svn/trunk/html5.js')
  %body
    #fb-root
    :javascript
      window.fbAsyncInit = function() {
        FB.init({
          appId      : '213243855449683', // App ID
          channelUrl : '//www.justintoo.com/channel.html', // Channel File
          status     : true, // check login status
          cookie     : true, // enable cookies to allow the server to access the session
          xfbml      : true  // parse XFBML
        });

        // Additional initialization code here
      };

      // Load the SDK Asynchronously
      (function(d){
         var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
         if (d.getElementById(id)) {return;}
         js = d.createElement('script'); js.id = id; js.async = true;
         js.src = "//connect.facebook.net/en_US/all.js";
         ref.parentNode.insertBefore(js, ref);
       }(document));

    #container
      %section#main
        %header#header
          .blog-title
            %a(href='/' rel="home") Justin Too
          = haml @intro if @intro

        %section#content
          = yield

      %section#sidebar
        %h3 About me
        %p
          I am a Computer Scientist by trade, athlete by passion, and a child of God by Grace.
        %p(style="text-align: right;")
          %strong Justin Too

        %h3 More about me
        %ul
          %li
            %a(href="http://www.facebook.com/doubleotoo" target="_blank" rel="me" title="My Facebook profile") Facebook
          %li
            %a(href="http://www.linkedin.com/in/justintoo" target="_blank" rel="me" title="My LinkedIn profile") LinkedIn
          %li
            %a(href="http://twitter.com/doubleotoo" target="_blank" rel="me" title="My Twitter account") Twitter
        %hr
        %ul
          %li
            %a(href="http://github.com/doubleotoo" target="_blank" rel="me" title="My open source projects on Github") Github
        %hr
        %ul
          %li
            %a(href="http://fccchurch.com" target="_blank" rel="friend" title="My local church") Family Community Church

      :javascript
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-30118834-1']);
        _gaq.push(['_trackPageview']);

        (function() {
          var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
          ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
          var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();


      %footer#footer
        %p All content on this site are &copy; Justin Too 2012-#{Date.today.year}, unless otherwise stated. All rights reserved.

    :javascript
      (function() {
        // jquery.min.js
        var jquery_main = document.createElement('script');
        jquery_main.type = 'text/javascript';
        jquery_main.async = true;
        jquery_main.src = '/javascript/jquery.min.js';
        var x = document.getElementsByTagName('footer')[0];
        x.parentNode.insertBefore(jquery_main, x);

        // jquery-ui.min.js
        var jquery_ui = document.createElement('script');
        jquery_ui.type = 'text/javascript';
        jquery_ui.async = true;
        jquery_ui.src = '/javascript/jquery-ui.min.js';
        jquery_main.parentNode.insertBefore(jquery_ui, jquery_main);

        // jquery.nav.min.js
        var jquery_nav = document.createElement('script');
        jquery_nav.type = 'text/javascript';
        jquery_nav.async = true;
        jquery_nav.src = '/javascript/jquery.nav.min.js';
        jquery_main.parentNode.insertBefore(jquery_nav, jquery_main);

        // jquery.scrollTo.js
        var jquery_scrollto = document.createElement('script');
        jquery_scrollto.type = 'text/javascript';
        jquery_scrollto.async = true;
        jquery_scrollto.src = '/javascript/jquery.scrollTo.js';
        jquery_main.parentNode.insertBefore(jquery_scrollto, jquery_main);
      })();

    :javascript
      (function() {
        var scrolling = function() {
          $('#nav').onePageNav({
            currentClass: 'active',
            filter: ':not(.toc-top-link)',
            changeHash: true,
            scrollSpeed: 750,
            easing: 'swing'
          });
        }

        //var toc = function() {
        //  var scrollBottom = $(window).scrollTop() + $(window).height();
        //  if ($(document).height() > scrollBottom) {
        //    $('#toc-top-li').show();
        //  }
        //}
        //$('#toc-top-li').hide();

        window.onload = function() { jQuery(scrolling); };
      })();

